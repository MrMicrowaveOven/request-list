<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="../css/styles.css">
  </head>
  <body>
    <div class="main">
      <div class="left">
        <input type="text" name="" value="" id="content">
        <button type="button" class="button" name="button" onclick="">Add Request</button>
      </div>
      <div class="right">
        <div class="request_count_text">
          <div class="request_count" id="request_count">
            <!-- requests -->
          </div>
        </div>
        <div class="request_list">

        </div>
      </div>
    </div>
    <script type="text/javascript">
      function addRequest() {
        // console.log("FAAAAAIL");
        $.ajax({
          type: "POST",
          url: "http://localhost:3000/requests",
          crossDomain: true,
          dataType: 'json',
          contentType: 'application/json',
          data: {
              "content": "4ever"
          },
          success: function (res) {
              console.log("Success!!!");
          },
          error: function (xhr, status, error) {
            // if (xhr.status === 403) {
            //   document.getElementById("response").innerHTML
            //     = "Sorry, ran out of pings for today :(";
            // } else {
            //   document.getElementById("response").innerHTML = "Error #" + xhr.status;
            // }
              console.log(error);
          }
      })
    }
    function getRequests() {
      var request_dates = [];
      var requests = [
        {
          id: 1,
          content: "yo",
          created_at: "2017-05-30T19:40:38.259Z",
          updated_at: "2017-05-30T19:40:38.259Z"
        },
        {
          id: 2,
          content: "yolo",
          created_at: "2017-05-30T19:43:39.628Z",
          updated_at: "2017-05-30T19:43:39.628Z"
        }
      ]
      $(".request_count").html("0 requests");

      requests.forEach(function(request) {
        request_dates.push(request.created_at)
      })
      request_dates.forEach(function(request_date) {
        $(".request_list").append("<div>" + request_date + "</div>")
      })
    }
    getRequests()
    </script>
  </body>
</html>
